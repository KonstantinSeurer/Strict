
using Strict.Memory.Allocator;

public singleton SystemAllocator : Allocator
{
	private external void* AllocateImplementation(UInt64 size);
	private external void FreeImplementation(void* address);

	public void* Allocate(UInt64 size) mut
	{
		void* result = AllocateImplementation(size);
		if (result == null)
		{
			throw OutOfMemoryError;
		}
		return result;
	}

	public void Free(void* address, UInt64 size) mut
	{
		FreeImplementation(address);
	}
}
